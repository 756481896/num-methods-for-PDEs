<!--
Automatically generated HTML file from DocOnce source
(https://github.com/hplgit/doconce/)
-->
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="DocOnce: https://github.com/hplgit/doconce/" />
<meta name="description" content="Scientific software engineering with a simple ODE model as example">
<meta name="keywords" content="importing modules,list comprehension,option-value pairs (command line),command-line options and values,reading the command line,doctests,software testing doctests,unit testing,software testing nose,software testing pytest,test function,software testing test function,unit testing,software testing unit testing (class-based),problem class,solver class,wrapper (code),reproducibility,replicability,Unix wildcard notation,wildcard notation (Unix),Word (Microsoft),LibreOffice,OpenOffice,HTML,MathJax,LaTeX,Sphinx (typesetting tool),Markdown,IPython notebooks,Jupyter notebooks,DocOnce,replicability">

<title>Scientific software engineering with a simple ODE model as example</title>


<link href="https://cdn.rawgit.com/hplgit/doconce/master/bundled/html_styles/style_solarized_box/css/solarized_light_code.css" rel="stylesheet" type="text/css" title="light"/>
<script src="https://cdn.rawgit.com/hplgit/doconce/master/bundled/html_styles/style_solarized_box/js/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>

<link href="http://thomasf.github.io/solarized-css/solarized-light.min.css" rel="stylesheet">
<style type="text/css">
h1 {color: #b58900;}  /* yellow */
/* h1 {color: #cb4b16;}  orange */
/* h1 {color: #d33682;}  magenta, the original choice of thomasf */
code { padding: 0px; background-color: inherit; }
pre {
  border: 0pt solid #93a1a1;
  box-shadow: none;
}
.alert-text-small   { font-size: 80%;  }
.alert-text-large   { font-size: 130%; }
.alert-text-normal  { font-size: 90%;  }
.alert {
  padding:8px 35px 8px 14px; margin-bottom:18px;
  text-shadow:0 1px 0 rgba(255,255,255,0.5);
  border:1px solid #93a1a1;
  border-radius: 4px;
  -webkit-border-radius: 4px;
  -moz-border-radius: 4px;
  color: #555;
  background-color: #eee8d5;
  background-position: 10px 5px;
  background-repeat: no-repeat;
  background-size: 38px;
  padding-left: 55px;
  width: 75%;
 }
.alert-block {padding-top:14px; padding-bottom:14px}
.alert-block > p, .alert-block > ul {margin-bottom:1em}
.alert li {margin-top: 1em}
.alert-block p+p {margin-top:5px}
.alert-notice { background-image: url(https://cdn.rawgit.com/hplgit/doconce/master/bundled/html_images/small_yellow_notice.png); }
.alert-summary  { background-image:url(https://cdn.rawgit.com/hplgit/doconce/master/bundled/html_images/small_yellow_summary.png); }
.alert-warning { background-image: url(https://cdn.rawgit.com/hplgit/doconce/master/bundled/html_images/small_yellow_warning.png); }
.alert-question {background-image:url(https://cdn.rawgit.com/hplgit/doconce/master/bundled/html_images/small_yellow_question.png); }

div { text-align: justify; text-justify: inter-word; }
</style>


</head>

<!-- tocinfo
{'highest level': 1,
 'sections': [(' Basic implementations ',
               1,
               'softeng1:basic',
               'softeng1:basic'),
              (' Mathematical problem and solution technique ',
               2,
               'softeng1:basic:math',
               'softeng1:basic:math'),
              (' A first, quick implementation ',
               2,
               'softeng1:basic:impl1',
               'softeng1:basic:impl1'),
              (' A more decent, flat program ',
               2,
               'softeng1:basic:impl2',
               'softeng1:basic:impl2'),
              (' Implementing the numerical algorithm in a function ',
               2,
               'softeng1:basic:func',
               'softeng1:basic:func'),
              (' Making a module ',
               2,
               'softeng1:basic:module',
               'softeng1:basic:module'),
              (' Prefixing imported functions by the module name ',
               2,
               'softeng1:basic:modprefix',
               'softeng1:basic:modprefix'),
              (' Comparing numerical schemes in one plot ',
               2,
               'softeng1:basic:experiment2',
               'softeng1:basic:experiment2'),
              (' User interfaces ', 1, None, '___sec8'),
              (' Command-line arguments ', 2, None, '___sec9'),
              (' Positional command-line arguments ', 2, None, '___sec10'),
              (' Option-value pairs on the command line ',
               2,
               None,
               '___sec11'),
              (' Creating a graphical web user interface ',
               2,
               None,
               '___sec12'),
              (' Making a compute function ', 3, None, '___sec13'),
              (' Generating the user interface ', 3, None, '___sec14'),
              (' Running the web application ', 3, None, '___sec15'),
              (' Tests for verifying implementations ', 1, None, '___sec16'),
              (' Doctests ', 2, None, '___sec17'),
              (' Unit tests and test functions ', 2, None, '___sec18'),
              (' Two Python test frameworks: nose and pytest ',
               3,
               None,
               '___sec19'),
              (' Test function requirements ', 3, None, '___sec20'),
              (' Comparison of real numbers ', 3, None, '___sec21'),
              (' Special assert functions from nose ', 3, None, '___sec22'),
              (' Locating test functions ', 3, None, '___sec23'),
              (' Running tests ', 3, None, '___sec24'),
              (' Installing nose and pytest ', 3, None, '___sec25'),
              (' Test function for the solver ', 2, None, '___sec26'),
              (' Test function for reading positional command-line arguments ',
               2,
               None,
               '___sec27'),
              (' Test function for reading option-value pairs ',
               2,
               None,
               '___sec28'),
              (' Classical class-based unit testing ',
               2,
               'softeng1:basic:unittest',
               'softeng1:basic:unittest'),
              (' Packaging the software for other users ',
               1,
               'softeng1:prog:se:git',
               'softeng1:prog:se:git'),
              (' Software directory tree ', 2, None, '___sec31'),
              (' Distributing just a module file ', 3, None, '___sec32'),
              (' Distributing a package ', 3, None, '___sec33'),
              (' Publishing the software at GitHub ', 2, None, '___sec34'),
              (' Classes for problem and solution method ',
               1,
               'softeng1:prog:se:class',
               'softeng1:prog:se:class'),
              (' The problem class ', 2, None, '___sec36'),
              (' The solver class ', 2, None, '___sec37'),
              (' Combining the objects ', 3, None, '___sec38'),
              (' Improving the problem and solver classes ',
               2,
               'softeng1:prog:se:class2',
               'softeng1:prog:se:class2'),
              (' A generic class for parameters ', 3, None, '___sec40'),
              (' Automating scientific experiments ',
               1,
               'softeng1:experiments',
               'softeng1:experiments'),
              (' Available software ', 2, None, '___sec42'),
              (' Required new results ', 2, None, '___sec43'),
              (' Combining plot files ', 2, None, '___sec44'),
              (' Running a program from Python ', 2, None, '___sec45'),
              (' The automating script ', 2, None, '___sec46'),
              (' Making a report ',
               2,
               'softeng1:exper:report',
               'softeng1:exper:report'),
              (' Word, OpenOffice, GoogleDocs ', 3, None, '___sec48'),
              (' HTML with MathJax ', 3, None, '___sec49'),
              (' LaTeX ', 3, None, '___sec50'),
              (' Sphinx ', 3, None, '___sec51'),
              (' Markdown ', 3, None, '___sec52'),
              (' IPython/Jupyter notebooks ', 3, None, '___sec53'),
              (' Wiki formats ', 3, None, '___sec54'),
              (' DocOnce ', 3, None, '___sec55'),
              (' Publishing a complete project ',
               2,
               'softeng1:exper:github',
               'softeng1:exper:github'),
              (' Exercises ', 1, None, '___sec57'),
              (' Problem 1: Make a tool for differentiating curves ',
               2,
               'softeng1:exer:derivative',
               'softeng1:exer:derivative'),
              (' Problem 2: Make solid software for the Trapezoidal rule ',
               2,
               'softeng1:exer:integral:flat',
               'softeng1:exer:integral:flat'),
              (' Problem 3: Implement classes for the Trapezoidal rule ',
               2,
               'softeng1:exer:integral:flat2',
               'softeng1:exer:integral:flat2'),
              (' Problem 4: Write a doctest and a test function ',
               2,
               'softeng1:exer:doctest1',
               'softeng1:exer:doctest1'),
              (' Exercise 5: Make use of a class implementation ',
               2,
               'softeng1:exer:class:dts',
               'softeng1:exer:class:dts'),
              (' Bibliography ', 1, None, '___sec63')]}
end of tocinfo -->

<body>



<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  TeX: {
     equationNumbers: {  autoNumber: "none"  },
     extensions: ["AMSmath.js", "AMSsymbols.js", "autobold.js", "color.js"]
  }
});
</script>
<script type="text/javascript"
 src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>

<!-- newcommands_keep.tex -->
$$
\newcommand{\tp}{\thinspace .}
$$




    
<a name="part0004"></a>
<p>
<!-- begin top navigation -->
<table style="width: 100%"><tr><td>
<div style="text-align: left;"><a href="._softeng1-solarized003.html">&laquo; Previous</a></div>
</td><td>
<div style="text-align: right;"><a href="._softeng1-solarized005.html">Next &raquo;</a></div>
</td></tr></table>
<!-- end top navigation -->
</p>

<p>
<!-- !split -->

<h1 id="softeng1:prog:se:git">Packaging the software for other users</h1>

<p>
As soon as you have some working software with a potential to be shared
with others, you should package your software in a standard way such
that users can easily download your software, install it, improve it,
and ask you to approve the improvements in new versions of the software.
During recent years, the software development community has established
quite firm tools and rules for how this is done.

<h2 id="___sec31">Software directory tree </h2>

<p>
We start with organizing our software as a directory tree. Our
software consists of one module file, <code>decay.py</code>, and potentially
unit tests in a separate file in a directory <code>tests</code>.

<h3 id="___sec32">Distributing just a module file </h3>

<p>
Let us start out with the minimum solution: just the <code>decay.py</code>
file containing all test functions for all unit tests. The the software
is just one file and all we need is a directory with this file.
In addition, users will expect an installation script <code>setup.py</code>
and a <code>README</code> file telling what the software is about, email to the
author, URL where the software can be downloaded, or other similar
information.

<p>
The <code>setup.py</code> file can be as short as

<p>

<!-- code=python (!bc pypro) typeset with pygments style "perldoc" -->
<div class="highlight" style="background: #eeeedd"><pre style="line-height: 125%"><span style="color: #8B008B; font-weight: bold">from</span> <span style="color: #008b45; text-decoration: underline">distutils.core</span> <span style="color: #8B008B; font-weight: bold">import</span> setup
setup(name=<span style="color: #CD5555">&#39;decay&#39;</span>,
      version=<span style="color: #CD5555">&#39;0.1&#39;</span>,
      py_modules=[<span style="color: #CD5555">&#39;decay&#39;</span>],
      scripts=[<span style="color: #CD5555">&#39;decay.py&#39;</span>],
      )
</pre></div>
<p>
The <code>py_modules</code> argument specifies a list of modules to be installed, while
<code>scripts</code> specifies programs to be run. The modules are typically
installed in some <code>lib</code> directory on the computer system, e.g.,
<code>/usr/local/lib/python2.7/dist-packages</code>, while executable programs go to
<code>/usr/local/bin</code>. To install the <code>decay.py</code> in these two places, a user
just runs

<p>

<!-- code=text (!bc sys) typeset with pygments style "perldoc" -->
<div class="highlight" style="background: #eeeedd"><pre style="line-height: 125%">Terminal&gt; sudo python setup.py install
</pre></div>
<p>
A user can easily install the software on her personal account if
a system-wide installation is not desirable. We refer to the
<a href="https://docs.python.org/2/install/index.html#alternate-installation" target="_self">installation documentation</a> for the many arguments that can be given to <code>setup.py</code>.

<p>
The software package is in the case above a directory <code>decay</code> with three files

<p>

<!-- code=text (!bc sys) typeset with pygments style "perldoc" -->
<div class="highlight" style="background: #eeeedd"><pre style="line-height: 125%">Terminal&gt; ls decay
README   decay.py   setup.pu
</pre></div>

<h3 id="___sec33">Distributing a package </h3>

<p>
If the software consists of more files than one or two modules, one
should make a Python <em>package</em> out of it. In our case we make a
package <code>decay</code> containing one module, also called <code>decay</code>.
A typical import for a user is then

<p>

<!-- code=text typeset with pygments style "perldoc" -->
<div class="highlight" style="background: #eeeedd"><pre style="line-height: 125%">import decay
u, t = decay.decay.solver(...)
</pre></div>
<p>
To make a package <code>decay</code>, create a directory <code>decay</code> and an empty
file in it with name <code>__init__.py</code>.

<p>
<div class="alert alert-block alert-notice alert-text-normal">
<b>Package import in <code>__init__.py</code>.</b>
<p>
One can ease the use of the package by providing a somewhat simpler
import like

<p>

<!-- code=text typeset with pygments style "perldoc" -->
<div class="highlight" style="background: #eee8d5"><pre style="line-height: 125%">import decay
u, t = decay.solver(...)

# or
from decay import solver
u, t = solver(...)
</pre></div>
<p>
This is accomplished by putting an import statement in the <code>__init__.py</code>
file, which is always run when doing the package import <code>import decay</code>
or <code>from decay import</code>. The <code>__init__.py</code> file reads

<p>

<!-- code=python (!bc pypro) typeset with pygments style "perldoc" -->
<div class="highlight" style="background: #eee8d5"><pre style="line-height: 125%"><span style="color: #8B008B; font-weight: bold">from</span> <span style="color: #008b45; text-decoration: underline">decay</span> <span style="color: #8B008B; font-weight: bold">import</span> *
</pre></div>

</div>


<p>
A <code>setup.py</code> script must now specify the directory name of the package
and also an executable program (<code>scripts=</code>)
in case we want to run <code>decay.py</code> as a stand-alone application:

<p>

<!-- code=python (!bc pypro) typeset with pygments style "perldoc" -->
<div class="highlight" style="background: #eeeedd"><pre style="line-height: 125%"><span style="color: #8B008B; font-weight: bold">from</span> <span style="color: #008b45; text-decoration: underline">distutils.core</span> <span style="color: #8B008B; font-weight: bold">import</span> setup
<span style="color: #8B008B; font-weight: bold">import</span> <span style="color: #008b45; text-decoration: underline">os</span>

setup(name=<span style="color: #CD5555">&#39;decay&#39;</span>,
      version=<span style="color: #CD5555">&#39;0.1&#39;</span>,
      author=<span style="color: #CD5555">&#39;Hans Petter Langtangen&#39;</span>,
      author_email=<span style="color: #CD5555">&#39;hpl@simula.no&#39;</span>,
      url=<span style="color: #CD5555">&#39;https://github.com/hplgit/decay-package/&#39;</span>,
      packages=[<span style="color: #CD5555">&#39;decay&#39;</span>],
      scripts=[os.path.join(<span style="color: #CD5555">&#39;decay&#39;</span>, <span style="color: #CD5555">&#39;decay.py&#39;</span>)]
     )
</pre></div>
<p>
We have also added some author and download information.
The reader is referred to the <a href="https://docs.python.org/2/distutils/setupscript.html" target="_self">Distutils documentation</a> for more information on how to
write <code>setup.py</code> scripts.

<p>
<div class="alert alert-block alert-notice alert-text-normal">
<b>Remark about the executable file.</b>
<p>
The executable program, <code>decay.py</code>, is above taken to be the complete module
file <code>decay.py</code>. It would normally be preferred to instead write a very
short script essentially importing <code>decay</code> and
running the test block in <code>decay.py</code>.
In this way, we distribute a module and a very short file, say <code>decay-main.py</code>,
as executable program:

<p>

<!-- code=python (!bc pypro) typeset with pygments style "perldoc" -->
<div class="highlight" style="background: #eee8d5"><pre style="line-height: 125%"><span style="color: #8B008B; font-weight: bold">import</span> <span style="color: #008b45; text-decoration: underline">decay</span>
decay.experiment_compare_dt(<span style="color: #658b00">True</span>)
decay.plt.show()
</pre></div>
<p>
(This import assumes an <code>__init__.py</code> file with <code>from decay import *</code>.)
</div>


<p>
In this package example, we move the unit tests out of the <code>decay.py</code>
module to a separate file, <code>test_decay.py</code>, and place this file in a
directory <code>tests</code>. Then the <code>nosetests</code> and <code>py.test</code> programs will
automatically find and execute the tests.

<p>
The complete directory structure reads

<p>

<!-- code=text (!bc sys) typeset with pygments style "perldoc" -->
<div class="highlight" style="background: #eeeedd"><pre style="line-height: 125%">Terminal&gt; /bin/ls -R
.:
decay  README  setup.py

./decay:
decay.py  __init__.py  tests

./decay/tests:
test_decay.py
</pre></div>

<h2 id="___sec34">Publishing the software at GitHub </h2>

<p>
The leading site today for publishing open source software projects is
GitHub at <a href="http://github.com" target="_self"><tt>http://github.com</tt></a>, provided you want your software to
be open to the world. With a paid GitHub account, you can have private
projects too.

<p>
Sign up for a GitHub account if you do not already have one.
Go to your account settings and provide an SSH key (typically
the file <code>~/.ssh/id_rsa.pub</code>) such that
you can communicate with GitHub without being prompted for your password.
All communication between your computer and GitHub goes via the version
control system Git. This may at first sight look tedious, but
this is the way professionals work with software today. With Git you
have full control of the history of your files, &quot;who did what when&quot;,
and this technology is superior to simpler ones like Dropbox and Google Drive,
especially when you collaborate with others.
There is a reason why Git has been the standard of working with files,
and there is no reason why you should not adopt this tool.

<p>
To create a new project, click on <em>New repository</em> on the main page and
fill out a project name. Click on the check button <em>Initialize this
repository with a README</em>, and click on <em>Create repository</em>. The next
step is to clone (copy) the GitHub repo (short for repository) to
your own computer(s) and fill it with files. The typical clone command is

<p>

<!-- code=text (!bc sys) typeset with pygments style "perldoc" -->
<div class="highlight" style="background: #eeeedd"><pre style="line-height: 125%">Terminal&gt; git clone git://github.com:username/projname.git
</pre></div>
<p>
where <code>username</code> is your GitHub username and <code>projname</code> is the
name of the repo (project). The result of <code>git clone</code> is a
directory <code>projname</code>. Go to this directory and add files.
As soon as the repo directory is populated with files, run

<p>

<!-- code=text (!bc sys) typeset with pygments style "perldoc" -->
<div class="highlight" style="background: #eeeedd"><pre style="line-height: 125%">Terminal&gt; git add .
Terminal&gt; git commit -am &#39;First registration of project files&#39;
Terminal&gt; git push origin master
</pre></div>
<p>
The above <code>git</code> commands look cryptic, but these commands plus
2-3 more are the essence of what you need in your daily work with
files in small or big
software projects. I strongly encourage you to
learn more about <a href="http://hplgit.github.io/teamods/bitgit/html/" target="_self">version control systems and project hosting
sites</a>
<a href="._softeng1-solarized008.html#Langtangen_bitgit">[1]</a>.

<p>
Your project files are now stored in the cloud at
<a href="https://github.com/username/projname" target="_self"><tt>https://github.com/username/projname</tt></a>. Anyone can
get the software by the listed <code>git clone</code> command you used above,
or by clicking on the links for zip and tar files.

<p>
Every time you update the project files, you need to register
the update at GitHub by

<p>

<!-- code=text (!bc sys) typeset with pygments style "perldoc" -->
<div class="highlight" style="background: #eeeedd"><pre style="line-height: 125%">Terminal&gt; git commit -am &#39;Description of the changes you made...&#39;
Terminal&gt; git push origin master
</pre></div>
<p>
The files at GitHub are now synchronized with your local ones.

<p>
You are recommended to read <a href="http://hplgit.github.io/teamods/bitgit/html/" target="_self">a quick intro</a> that makes you
you up and going with this style of
professional work. And you should put all your writings and programming
projects in repositories in the cloud!

<p>
<p>
<!-- begin bottom navigation -->
<table style="width: 100%"><tr><td>
<div style="text-align: left;"><a href="._softeng1-solarized003.html">&laquo; Previous</a></div>
</td><td>
<div style="text-align: right;"><a href="._softeng1-solarized005.html">Next &raquo;</a></div>
</td></tr></table>
<!-- end bottom navigation -->
</p>

<!-- ------------------- end of main content --------------- -->


</body>
</html>
    

